<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <title>Rtmp Player</title>

    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <link href="//vjs.zencdn.net/7.10.2/video-js.min.css" rel="stylesheet">
    <script src="//vjs.zencdn.net/7.10.2/video.min.js"></script>
    
    <link href="https://cdn.bootcdn.net/ajax/libs/semantic-ui/2.4.1/semantic.min.css" rel="stylesheet">
    <script src="https://cdn.bootcdn.net/ajax/libs/semantic-ui/2.4.1/semantic.min.js"></script>


</head>
<body>
    <div class="ui container">
        <div style="height: 20px;"></div>
        <form class="ui form">
            <div class="fields">
                <div class="ten wide field">
                    <label>RtmpÊµÅ</label>
                    <input id="input-stream" value="/hls/test.m3u8">
                </div>
                <div class="four wide field">
                    <label>Video Type</label>
                    <input id="input-type" value="application/x-mpegURL">
                </div>
                <div class="two wide field">
                    <label>Video Width</label>
                    <input id="input-w" value="640">
                </div>
                <div class="two wide field">
                    <label>Video Height</label>
                    <input id="input-h" value="480">
                </div>
                <div class="two wide field">
                    <button type="button" class="ui green button" style="margin-top: 12px;" onclick="set_stream()">
                        <i class="check icon"></i>
                        Applie
                    </button>
                </div>
                <script>
                    function set_stream(){
                        try{
                            videojs('player', {}).dispose();
                        } catch (TypeError){ ;}
                        console.log("Create new player.")
                        obj = $("#player-example").clone();
                        obj.attr('id', 'player');
                        console.log(obj)
                        $("#player-container").append(obj.get(0));

                        var player = videojs('player',{
                            sources: [{
                              src: $("#input-stream").val(),
                              type: $("#input-type").val()
                            }], 
                            width:$("#input-w").val(), 
                            height:$("#input-h").val(),
                            autoplay: true,
                        });
                        $("#player").css("width", $("#input-w").val());
                        $("#player").css("height", $("#input-h").val());
                    }
                </script>
            </div>
        </form>
        <div style="display: none;">
            <video id ="player-example" class="video-js" controls>
                <p class="vjs-no-js">
                To view this video please enable JavaScript, and consider upgrading to a
                web browser that supports HTML5 video
                </p>
            </video>
        </div>
        <div style="width: 100%;" id="player-container">
            
        </div>
    </div>
    
</body>